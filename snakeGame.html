<!-- Make the main canvas -->
<canvas id = "gc" width = "400" height = "400"></canvas>

<!--start the script-->
<script>

//variables:
//positions
positionX = positionY = 10;

gs = 20;
tc = 20;
ax = ay = 15;

//speeds
xSpeed = ySpeed = 0;
//array for holding the trail behind the snake
trail=[];
//tail length
tail = 5;
//variables for saving the speeds in each direction
saveX = 0;
saveY = 0;
//boolean for paused
paused = false;
//game speed increment
increment = 15;

//called when the screen loads
window.onload=function()
{
	//get the canvas
	canvas = document.getElementById("gc");
	//set up the context
	context = canvas.getContext("2d");
	//make a listener for keydown and call the keyPush function
	document.addEventListener("keydown",keyPush);
	//update 15 times for every second
	setInterval(game,1000/increment);
}

//function for running the game
function game()
{
	//
	positionX+=xSpeed;
	positionY+=ySpeed;
	if(positionX<0)
	{
		positionX=tc-1;
	}
	if(positionX>tc-1)
	{
		positionX=0;
	}
	if(positionY<0)
	{
		positionY=tc-1;
	}
	if(positionY>tc-1)
	{
		positionY=0;
	}
	
	context.fillStyle="black";
	context.fillRect(0,0,canvas.width,canvas.height);
	
	context.fillStyle="lime";
	for(var i=0; i<trail.length; i++)
	{
		context.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
		if(trail[i].x==positionX && trail[i].y==positionY)
		{
			tail = 5;
		}
	}
	
	trail.push({x:positionX,y:positionY});
	
	while(trail.length>tail)
	{
		trail.shift();
	}	
	
	//apple is eaten
	if(ax==positionX && ay==positionY)
	{
		tail++;
		ax=Math.floor(Math.random()*tc);
		ay=Math.floor(Math.random()*tc);
	}
	
	context.fillStyle="red";
	context.fillRect(ax*gs,ay*gs,gs-2,gs-2);
	
}

//determine which button was pressed
function keyPush(evt)
{
	//switch on the keyCode that is passed
	switch(evt.keyCode)
	{
		//left direction
		case 37: //(left arrow)
		case 65: //(A)
			console.log("left");
			xSpeed=-1;
			ySpeed=0;
			break;
		//up direction
		case 38: //(up arrow)
		case 87: //(W)
			console.log("up");
			xSpeed=0;
			ySpeed=-1;
			break;
		//right direction
		case 39: //(right arrow)
		case 68: //(D)
			console.log("right");
			xSpeed=1;
			ySpeed=0;
			break;
		//down direction
		case 40: //(down arrow)
		case 83: //(S)
			console.log("down");
			xSpeed=0;
			ySpeed=1;
			break;
		
		//pause the game
		case 27:
			console.log("Game Paused");
			//set the boolean to be true
			paused = true;
			//save the current speeds
			saveX = xSpeed;
			saveY = ySpeed;
			//now make the snake stop moving
			xSpeed = ySpeed = 0;
			break;
		
		//un-pause the game
		case 13:
			console.log("Game Resumed");
			//make sure the game has been paused		
			if (paused === true)
			{
				xSpeed = saveX;
				ySpeed = saveY;
				paused = false;
				saveX = saveY = 0;
			}
			break;
	}
}

</script>
<!--end the script-->